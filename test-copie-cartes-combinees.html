<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Copie des cartes combinÃ©es</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .header {
            background: #4CAF50;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-case {
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 10px 0;
            background: #f9f9f9;
        }
        .success {
            border-left-color: #4CAF50;
            background: #e8f5e9;
        }
        .warning {
            border-left-color: #FF9800;
            background: #fff3e0;
        }
        .code {
            background: #263238;
            color: #aed581;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 10px 0;
        }
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin: 0 4px;
        }
        .badge-blue {
            background: #2196F3;
            color: white;
        }
        .badge-green {
            background: #4CAF50;
            color: white;
        }
        .steps {
            counter-reset: step-counter;
            list-style: none;
            padding-left: 0;
        }
        .steps li {
            counter-increment: step-counter;
            margin: 15px 0;
            padding-left: 40px;
            position: relative;
        }
        .steps li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: #2196F3;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .key {
            display: inline-block;
            padding: 4px 12px;
            background: #333;
            color: white;
            border-radius: 4px;
            font-family: monospace;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>âœ… Test - Copie des cartes combinÃ©es</h1>
        <p>VÃ©rification de la fonctionnalitÃ© de copie/duplication des cartes combinÃ©es</p>
    </div>

    <div class="section">
        <h2>ğŸ¯ Objectif</h2>
        <p>Permettre aux utilisateurs de copier des cartes combinÃ©es (plusieurs matiÃ¨res dans un mÃªme crÃ©neau) en maintenant la touche <span class="key">Ctrl</span> pendant le glissement.</p>
    </div>

    <div class="section">
        <h2>ğŸ”§ Modifications apportÃ©es</h2>
        
        <div class="test-case success">
            <h3>1. DÃ©tection Ctrl amÃ©liorÃ©e</h3>
            <p>Utilisation de plusieurs mÃ©thodes de dÃ©tection pour plus de fiabilitÃ© :</p>
            <div class="code">
const isCtrlPressed = isCtrlGloballyPressed || 
                     (e as any).activatorEvent?.ctrlKey || 
                     (e as any).activatorEvent?.metaKey;
            </div>
            <p><span class="badge badge-green">âœ“</span> Variable globale</p>
            <p><span class="badge badge-green">âœ“</span> Ã‰vÃ©nement activatorEvent</p>
            <p><span class="badge badge-green">âœ“</span> Support Mac (metaKey)</p>
        </div>

        <div class="test-case success">
            <h3>2. Copie des cartes combinÃ©es</h3>
            <p>Logique de copie dans <code>handleDragEnd</code> :</p>
            <ul>
                <li>DÃ©tection des cartes combinÃ©es via l'ID <code>combined-*</code></li>
                <li>Extraction des cours originaux</li>
                <li>CrÃ©ation de copies avec nouveaux IDs uniques</li>
                <li>Placement automatique dans le crÃ©neau cible</li>
            </ul>
        </div>

        <div class="test-case success">
            <h3>3. Badge visuel "COPIE"</h3>
            <p>Indicateur visuel pendant le glissement :</p>
            <div class="code">
{isDragging && isCtrlGloballyPressed && 
  &lt;div className="badge-copie"&gt;COPIE&lt;/div&gt;
}
            </div>
            <p><span class="badge badge-blue">COPIE</span> Badge bleu affichÃ© pendant le drag avec Ctrl</p>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ“‹ ProcÃ©dure de test</h2>
        
        <ol class="steps">
            <li>
                <strong>CrÃ©er une carte combinÃ©e</strong>
                <p>Placez plusieurs cours dans le mÃªme crÃ©neau pour crÃ©er une carte combinÃ©e</p>
            </li>
            <li>
                <strong>Maintenir Ctrl</strong>
                <p>Appuyez et maintenez la touche <span class="key">Ctrl</span> (ou <span class="key">Cmd</span> sur Mac)</p>
            </li>
            <li>
                <strong>Glisser la carte</strong>
                <p>Cliquez et faites glisser la carte combinÃ©e depuis le planning</p>
            </li>
            <li>
                <strong>VÃ©rifier le badge</strong>
                <p>Un badge bleu <span class="badge badge-blue">COPIE</span> doit apparaÃ®tre sur la carte</p>
            </li>
            <li>
                <strong>DÃ©poser dans un nouveau crÃ©neau</strong>
                <p>RelÃ¢chez la souris dans le crÃ©neau cible</p>
            </li>
            <li>
                <strong>VÃ©rifier la copie</strong>
                <p>Une nouvelle carte combinÃ©e doit apparaÃ®tre avec tous les cours copiÃ©s</p>
            </li>
        </ol>
    </div>

    <div class="section">
        <h2>âœ… CritÃ¨res de validation</h2>
        
        <div class="test-case">
            <h3>Comportement attendu</h3>
            <ul>
                <li>âœ“ Le badge "COPIE" s'affiche quand Ctrl est maintenu</li>
                <li>âœ“ Tous les cours de la carte combinÃ©e sont copiÃ©s</li>
                <li>âœ“ Chaque copie a un nouvel ID unique</li>
                <li>âœ“ La carte originale reste en place</li>
                <li>âœ“ La copie est placÃ©e dans le nouveau crÃ©neau</li>
                <li>âœ“ Un message de succÃ¨s s'affiche</li>
            </ul>
        </div>

        <div class="test-case warning">
            <h3>Cas limites Ã  tester</h3>
            <ul>
                <li>Copier une carte combinÃ©e avec 2 matiÃ¨res</li>
                <li>Copier une carte combinÃ©e avec 3+ matiÃ¨res</li>
                <li>Copier plusieurs fois la mÃªme carte</li>
                <li>Copier depuis le planning vers un autre crÃ©neau</li>
                <li>VÃ©rifier que sans Ctrl, la carte est dÃ©placÃ©e (pas copiÃ©e)</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ› DÃ©bogage</h2>
        <p>Si la copie ne fonctionne pas, vÃ©rifiez dans la console du navigateur :</p>
        <div class="code">
ğŸ¯ Carte combinÃ©e dÃ©tectÃ©e: combined-abc123-def456
ğŸ“‹ IDs des cours originaux: ['abc123', 'def456']
âŒ¨ï¸ DÃ©tection Ctrl - global: true event: true final: true
ğŸ“‹ Mode copie activÃ© pour la carte combinÃ©e
ğŸ†• Nouveaux cours crÃ©Ã©s: [{id: 'xyz789', subject: 'MATH'}, ...]
âœ… Carte combinÃ©e copiÃ©e avec succÃ¨s
        </div>
    </div>

    <div class="section">
        <h2>ğŸ“ Notes</h2>
        <ul>
            <li>Les cartes combinÃ©es sont identifiÃ©es par un ID commenÃ§ant par <code>combined-</code></li>
            <li>La dÃ©tection Ctrl utilise 3 mÃ©thodes pour maximiser la compatibilitÃ©</li>
            <li>Chaque copie crÃ©e de nouveaux cours indÃ©pendants</li>
            <li>Les copies peuvent Ãªtre re-copiÃ©es ou dÃ©placÃ©es normalement</li>
        </ul>
    </div>

    <div class="section" style="background: #e3f2fd; border: 2px solid #2196F3;">
        <h2>ğŸš€ PrÃªt Ã  tester !</h2>
        <p>Lancez l'application avec <code>npm run dev</code> et testez la fonctionnalitÃ© de copie des cartes combinÃ©es.</p>
        <p><strong>Rappel :</strong> Maintenez <span class="key">Ctrl</span> pendant le glissement pour copier au lieu de dÃ©placer.</p>
    </div>
</body>
</html>
